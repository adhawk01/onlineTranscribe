<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Embed Subtitles</title>
</head>
<body>

<h2>Upload Audio to Generate Video with Subtitles</h2>

<form id="uploadForm">
    <input type="file" id="audio" name="audio" accept="audio/*" required />
    <br><br>
    <button type="submit">Upload & Process</button>
</form>

<br>

<div id="result"></div>

<script>
document.getElementById("uploadForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const fileInput = document.getElementById("audio");
    const resultDiv = document.getElementById("result");

    if (!fileInput.files.length) {
        alert("Please select an audio file.");
        return;
    }

    const formData = new FormData();
    formData.append("audio", fileInput.files[0]);

    resultDiv.innerHTML = "Processing... Please wait.";

    try {
        const response = await fetch("/embedSubtitle", {
            method: "POST",
            body: formData
        });

        const data = await response.json();

        if (response.ok) {
            resultDiv.innerHTML = `
                <h3>Success!</h3>
                <p>Video created:</p>
                <a href="${data.video_path}" target="_blank">${data.video_path}</a>
            `;
        } else {
            resultDiv.innerHTML = `
                <h3>Error</h3>
                <p>${data.error || "Unknown error"}</p>
            `;
        }

    } catch (err) {
        resultDiv.innerHTML = `
            <h3>Error</h3>
            <p>${err.message}</p>
        `;
    }
});
</script>

</body>
</html>
